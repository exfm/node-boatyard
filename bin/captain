#!/usr/bin/env node

"use strict";

var nconf = require('nconf'),
    path = require('path'),
    yard = require('../'),
    Captain = yard.Captain,
    Boat = yard.Boat;

nconf.argv()
    .env()
    .use('memory');

nconf.defaults({
    'size': 100000,
    'partitioner': '../examples/partitioner.js',
    'boat': 'example-partitioner',
    'yard': 'http://localhost:3000',
    'mongoHosts': ['localhost']
});

var boat = new Boat(nconf.get('boat'), nconf.get('yard')),
    captain = new Captain(Number(nconf.get('size')), boat);

captain.startBoat(require(path.resolve(nconf.get('partitioner'))));